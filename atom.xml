<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dana Shaw&#39;s blog</title>
  
  <subtitle>为了去往别处</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://dana5haw.com/"/>
  <updated>2020-07-17T15:06:51.037Z</updated>
  <id>https://dana5haw.com/</id>
  
  <author>
    <name>Dana Shaw</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>RHCSA练习</title>
    <link href="https://dana5haw.com/posts/RHCSA-practice.html"/>
    <id>https://dana5haw.com/posts/RHCSA-practice.html</id>
    <published>2020-07-17T13:00:07.000Z</published>
    <updated>2020-07-17T15:06:51.037Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>练习RHCSA题目。</p><a id="more"></a><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">虚拟机的网络配置应该如下：</span><br><span class="line">主机名： station.domain1.example.com</span><br><span class="line">IP地址： 172.24.1.5</span><br><span class="line">子网掩码： 255.255.255.0</span><br><span class="line">网关 172.24.1.254</span><br><span class="line">名称服务： 172.24.1.250</span><br><span class="line">虚拟机的 root 密码是 flectrag</span><br></pre></td></tr></table></figure><h2 id="破解root密码"><a href="#破解root密码" class="headerlink" title="破解root密码"></a>破解root密码</h2><ol><li>重启虚拟机，按e进入编辑模式，在linux16这行末尾加上<code>rd.break</code>，按ctrl+x启动。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image.png" alt="image.png"></li><li>执行以下命令，重置root密码，重启虚拟机。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,rw &#x2F;sysroot</span><br><span class="line">chroot &#x2F;sysroot</span><br><span class="line">echo &quot;flectrag&quot; | passwd --stdin root</span><br><span class="line">touch &#x2F;.autorelabel</span><br><span class="line">exit</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image9cebc510014f6486.png" alt="image9cebc510014f6486.png"></li><li>以重置的密码登录到root用户</li></ol><h2 id="配置网卡"><a href="#配置网卡" class="headerlink" title="配置网卡"></a>配置网卡</h2><p>使用nm-connetion-editor配置网卡信息，重启网卡<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image84e01cc66367709d.png" alt="image84e01cc66367709d.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imageae2ef2e0312bef29.png" alt="imageae2ef2e0312bef29.png"></p><h2 id="配置SELINUX"><a href="#配置SELINUX" class="headerlink" title="配置SELINUX"></a>配置SELINUX</h2><p>默认配置是enforcing，检查一下配置文件（/etc/selinux/config）的配置就行。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imagec2f0a3522027e869.png" alt="imagec2f0a3522027e869.png"></p><h2 id="配置yum仓库"><a href="#配置yum仓库" class="headerlink" title="配置yum仓库"></a>配置yum仓库</h2><ol><li>编辑yum配置文件<code>/etc/yum.repos.d/rhcsa.repo</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[rhcsa]</span><br><span class="line">name&#x3D;rhcsa</span><br><span class="line">baseurl&#x3D;http:&#x2F;&#x2F;rhgls.domain1.example.com&#x2F;rhel</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure></li><li>yum clean all</li><li>yum makecache</li></ol><h2 id="调整逻辑卷大小"><a href="#调整逻辑卷大小" class="headerlink" title="调整逻辑卷大小"></a>调整逻辑卷大小</h2><ol><li>添加一块20G硬盘<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imagedf280f9948188cdc.png" alt="imagedf280f9948188cdc.png"></li><li>创建一个逻辑卷，大小为200M<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imagee1f38818b51e09c6.png" alt="imagee1f38818b51e09c6.png"></li><li>将逻辑卷扩容至300M</li></ol><ul><li>逻辑卷挂载到/finance目录<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image9adc2e441f5389f9.png" alt="image9adc2e441f5389f9.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image6a66760da30e2981.png" alt="image6a66760da30e2981.png"></li><li>扩容<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image9f017c72d2afeb2e.png" alt="image9f017c72d2afeb2e.png"></li></ul><h2 id="创建用户账户"><a href="#创建用户账户" class="headerlink" title="创建用户账户"></a>创建用户账户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">一个名为 adminuser 的组</span><br><span class="line">一个名为 natasha 的用户，其属于 adminuser ，这个组是该用户的从属组</span><br><span class="line">一个名为 harry 的用户，属于 adminuser ，这个组是该用户的从属组</span><br><span class="line">一个名为 sarah 的用户，其在系统中没有可交互的 shell，并且该用户不是 adminuser 组的成员</span><br><span class="line">用户 natasha ， harry ，和 sarah 的密码都要设置为 flectrag</span><br></pre></td></tr></table></figure><p><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image3cc73e52d77c097d.png" alt="image3cc73e52d77c097d.png"></p><h2 id="配置文件-var-tmp-fstab的权限"><a href="#配置文件-var-tmp-fstab的权限" class="headerlink" title="配置文件/var/tmp/fstab的权限"></a>配置文件/var/tmp/fstab的权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">拷贝文件 &#x2F;etc&#x2F;fstab 到 &#x2F;var&#x2F;tmp&#x2F;fstab。 配置文件 &#x2F;var&#x2F;tmp&#x2F;fstab 的权限：</span><br><span class="line">文件 &#x2F;var&#x2F;tmp&#x2F;fstab 的拥有者是 root 用户</span><br><span class="line">文件 &#x2F;var&#x2F;tmp&#x2F;fstab 属于 root 组</span><br><span class="line">文件 &#x2F;var&#x2F;tmp&#x2F;fstab 对任何人都不可执行</span><br><span class="line">用户 natasha 能够对文件 &#x2F;var&#x2F;tmp&#x2F;fstab 具有读和写的权限</span><br><span class="line">用户 harry 对文件 &#x2F;var&#x2F;tmp&#x2F;fstab 既不能读，也不能写</span><br><span class="line">所有其他用户（当前的和将来的）能够对文件 &#x2F;var&#x2F;tmp&#x2F;fstab 进行读操作</span><br></pre></td></tr></table></figure><p><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image3fec89fc09b82a7b.png" alt="image3fec89fc09b82a7b.png"></p><h2 id="配置一个cron任务"><a href="#配置一个cron任务" class="headerlink" title="配置一个cron任务"></a>配置一个cron任务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用户 natasha 必须配置一个定时执行任务，每天在本地时间 14:23 时执行命令。</span><br><span class="line">&#x2F;bin&#x2F;echo hiya</span><br></pre></td></tr></table></figure><p><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image350a6c0804039dfb.png" alt="image350a6c0804039dfb.png"></p><h2 id="创建一个共享目录"><a href="#创建一个共享目录" class="headerlink" title="创建一个共享目录"></a>创建一个共享目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">创建一个共享目录 &#x2F;home&#x2F;admins ，特性如下：</span><br><span class="line">&#x2F;home&#x2F;admins 目录的组所有权是 adminuser</span><br><span class="line">adminuser 组的成员对目录有读写和执行的权限。除此之外的其他所有用户没有任何权限（root 用户能够访问系统中的所有文件和目录）</span><br><span class="line">在 &#x2F;home&#x2F;admins 目录中创建的文件，其组所有权会自动设置为属于 adminuser 组</span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image4929cc5c7eb3e5bf.png" alt="image4929cc5c7eb3e5bf.png"></h2><p>sgid：该目录创建的文件自动属于目录的所有组</p><h2 id="安装内核的升级"><a href="#安装内核的升级" class="headerlink" title="安装内核的升级"></a>安装内核的升级</h2><ol><li>编辑yum配置文件/etc/yum.repos.d/update.repo<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[update]</span><br><span class="line">name&#x3D;update</span><br><span class="line">baseurl&#x3D;http:&#x2F;&#x2F;rhgls.domain1.example.com&#x2F;updates</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure></li><li>yum clean all</li><li>yum makecache</li><li>yum update kernel</li></ol><h2 id="绑定到外部验证服务"><a href="#绑定到外部验证服务" class="headerlink" title="绑定到外部验证服务"></a>绑定到外部验证服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">系统 host.domain1.example.com 提供了一个 LDAP 验证服务。您的系统需要按照以下要求绑定到这个服务上：</span><br><span class="line">验证服务器的基本 DN 是： dc&#x3D;domain1,dc&#x3D;example,dc&#x3D;com.</span><br><span class="line">帐户信息和验证信息都是由 LDAP 提供的。</span><br><span class="line">连接需要使用证书进行加密，证书可以在下面的链接中下载： ftp:&#x2F;&#x2F;host.domain1.example.com&#x2F;pub&#x2F;domain1.crt</span><br><span class="line">当正确完成配置后，用户 ldapuser1 应该能够登录到您的系统中，但是没有主目录。当您完成 autofs 的题目之后，才能生成主目录。</span><br></pre></td></tr></table></figure><ol><li>安装LDAP相关软件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openldap openldap-clients sssd authconfig-gtk</span><br></pre></td></tr></table></figure></li><li>使用工具authconfig-gtk进入配置界面<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imagea89f653aa9c27150.png" alt="imagea89f653aa9c27150.png"></li><li>验证：<code>id ldapuser1</code>如果能看到该用户，说明LDAP服务已挂载成功</li></ol><h2 id="配置NTP服务"><a href="#配置NTP服务" class="headerlink" title="配置NTP服务"></a>配置NTP服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">让其作为一个 rhgls.domain1.example.com 的 NTP 客户端</span><br></pre></td></tr></table></figure><ol><li>编辑配置文件/etc/chrony.conf<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image2c31dded0e264c27.png" alt="image2c31dded0e264c27.png"></li><li>重启chronyd并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart chronyd</span><br><span class="line">systemctl enable chronyd</span><br></pre></td></tr></table></figure></li></ol><h2 id="配置autofs"><a href="#配置autofs" class="headerlink" title="配置autofs"></a>配置autofs</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">让用户可自动挂载由主机 host.domain1.example.com 提供的家目录： &#x2F;home&#x2F;guests&#x2F;ldapuser1。</span><br><span class="line">解题方法：（最新考题nfs版本是3,具体的挂载目录看考题）</span><br></pre></td></tr></table></figure><ol><li>安装autofs<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install autofs</span><br></pre></td></tr></table></figure></li><li>配置autofs<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image19f7b76c2b7cc2d0.png" alt="image19f7b76c2b7cc2d0.png"></li></ol><ul><li>主配置文件/etc/auto.master<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image066f9a5d45880297.png" alt="image066f9a5d45880297.png"></li><li>编辑配置文件/etc/auto.guests<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image7231a44fe49f0d6e.png" alt="image7231a44fe49f0d6e.png"></li></ul><ol start="3"><li>重启autofs并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart autofs</span><br><span class="line">systemctl enable autofs</span><br></pre></td></tr></table></figure></li><li>验证：<code>su - ldapuser1</code>可以直接登录，不提示“没有用户家目录”，就说明autofs成功。</li></ol><h2 id="配置一个用户账户"><a href="#配置一个用户账户" class="headerlink" title="配置一个用户账户"></a>配置一个用户账户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">创建一个UID为2000的用户，用户名称是jack。</span><br></pre></td></tr></table></figure><p><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imageb2f337f345b3b924.png" alt="imageb2f337f345b3b924.png"></p><h2 id="添加一个swap分区"><a href="#添加一个swap分区" class="headerlink" title="添加一个swap分区"></a>添加一个swap分区</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">创建一个512M的SWAP分区，开机需要自动挂载</span><br></pre></td></tr></table></figure><ol><li>添加一块20G的硬盘<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image047774d561eacf8a.png" alt="image047774d561eacf8a.png"></li><li>创建512M的逻辑分区<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imagee60791cb1bc128df.png" alt="imagee60791cb1bc128df.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image6398915c46308c09.png" alt="image6398915c46308c09.png"></li><li>创建swap分区<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image8bcab1c017b294f7.png" alt="image8bcab1c017b294f7.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image2f96d0cb1daa2b45.png" alt="image2f96d0cb1daa2b45.png"></li></ol><h2 id="查找文件"><a href="#查找文件" class="headerlink" title="查找文件"></a>查找文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查找所有属于ronny用户的文件，并复制到&#x2F;findfiles目录中。</span><br></pre></td></tr></table></figure><ol><li>创建ronny用户，准备一些文件<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image1725a8cab707a9ff.png" alt="image1725a8cab707a9ff.png"></li><li>创建/findfiles目录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;findfiles</span><br></pre></td></tr></table></figure></li><li>find命令查找ronny用户的文件，并复制到/findfiles目录<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image83909d7438a7450d.png" alt="image83909d7438a7450d.png"></li></ol><h2 id="查找一个字符串"><a href="#查找一个字符串" class="headerlink" title="查找一个字符串"></a>查找一个字符串</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看&#x2F;usr&#x2F;share&#x2F;dict&#x2F;words文件中所有包含seismic关键词的行，并将找到的行写入到&#x2F;root&#x2F;filelist文件中。</span><br></pre></td></tr></table></figure><p>自己随便举了一个例子，方法就是这样：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image6b93118afb4ad556.png" alt="image6b93118afb4ad556.png"></p><h2 id="创建一个归档"><a href="#创建一个归档" class="headerlink" title="创建一个归档"></a>创建一个归档</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将&#x2F;etc目录打包成压缩包后放置在&#x2F;root&#x2F;backup.tar.bz2.</span><br></pre></td></tr></table></figure><p><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/imagefa8438a74df6bfd0.png" alt="imagefa8438a74df6bfd0.png"></p><h2 id="创建一个逻辑卷"><a href="#创建一个逻辑卷" class="headerlink" title="创建一个逻辑卷"></a>创建一个逻辑卷</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">创建指定大小的逻辑卷，需要自己创建分区、物理卷、逻辑卷组和逻辑卷。</span><br><span class="line">创建一个名称为database的逻辑卷，卷组名称为datastore。</span><br><span class="line">逻辑卷大小为160M，PE大小为16M。</span><br><span class="line">要求开机后自动挂载到&#x2F;mnt&#x2F;database目录中。</span><br></pre></td></tr></table></figure><p>创建逻辑卷，并设置开机自动挂载<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image6e6685c090bcafc0.png" alt="image6e6685c090bcafc0.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image7efc95cf539dcd13.png" alt="image7efc95cf539dcd13.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image4fd41ecb803e478b.png" alt="image4fd41ecb803e478b.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image8d7e1fcef77fc298.png" alt="image8d7e1fcef77fc298.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/17/image0463563e4587cf22.png" alt="image0463563e4587cf22.png"></p><h2 id="最后，重启机器，检查题目"><a href="#最后，重启机器，检查题目" class="headerlink" title="最后，重启机器，检查题目"></a>最后，重启机器，检查题目</h2>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;练习RHCSA题目。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="RHCSA练习" scheme="https://dana5haw.com/tags/RHCSA%E7%BB%83%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>redhat7中mariadb的简单使用</title>
    <link href="https://dana5haw.com/posts/redhat7-mariadb-usage.html"/>
    <id>https://dana5haw.com/posts/redhat7-mariadb-usage.html</id>
    <published>2020-07-12T08:36:59.000Z</published>
    <updated>2020-07-12T09:09:07.664Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>redhat7默认的数据库是mariadb，使用语法与mysql一致。</p><a id="more"></a><h2 id="mariadb的简单使用"><a href="#mariadb的简单使用" class="headerlink" title="mariadb的简单使用"></a>mariadb的简单使用</h2><ol><li>安装mariadb并开启服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb mariadb-server</span><br><span class="line">systemctl restart mariadb</span><br><span class="line">systemctl enable mariadb</span><br></pre></td></tr></table></figure></li><li>数据库初始化，注意过程中会设置root密码。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure></li><li>登录到root用户的数据库<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>进入数据库命令行：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; show databases; #查看当前的数据库</span><br><span class="line">MariaDB [(none)]&gt; set password &#x3D; password(&#39;linuxprobe&#39;); #修改root密码</span><br><span class="line">MariaDB [(none)]&gt; create user edge@localhost identified by &#39;redhat&#39;; #新建用户edge，密码为redhat</span><br><span class="line">MariaDB [(none)]&gt; grant select,update,delete,insert on mysql.* to edge@localhost; #给edge用户授予权限，可对root用户的数据库进行增删查改</span><br><span class="line">MariaDB [(none)]&gt; revoke select,update,delete,insert on mysql.* from edge@localhost; #给edge用户取消权限，该用户将无法看到root用户的数据库</span><br><span class="line">MariaDB [(none)]&gt; create database linuxprobe; #创建数据库linuxprobe</span><br><span class="line">MariaDB [(none)]&gt; use linuxprobe; #进入数据库linuxprobe</span><br><span class="line">MariaDB [(none)]&gt; create table mybook(name char(15),price int,pages int); #创建数据表mybook</span><br><span class="line">MariaDB [(none)]&gt; describe mybook; #查看数据表mybook的字段结构</span><br><span class="line">MariaDB [(none)]&gt; insert into mybook (name,price,pages) values(&#39;linuxprobe&#39;,&#39;50&#39;,&#39;300&#39;); #向数据表mybook中插入数据</span><br><span class="line">MariaDB [(none)]&gt; update mybook set price&#x3D;300; #更改数据表的price字段，设置为30</span><br><span class="line">MariaDB [(none)]&gt; delete from mybook; #删除数据表mybook的数据内容</span><br><span class="line">MariaDB [(none)]&gt; select * from mybook; #查询数据表mybook的所有数据 </span><br><span class="line">MariaDB [(none)]&gt; select name,price from mybook where price&#x3D;30; #条件查询，查询price字段值为30的数据</span><br><span class="line">MariaDB [(none)]&gt; drop table mybook; #删除数据表mybook</span><br></pre></td></tr></table></figure></li></ol><hr><p><code>delete from mybook</code>与<code>drop table mybook</code>的区别：delete是清空数据表里面的数据，数据表结构还在；但是drop是直接把数据表销毁，数据表结构也不在了。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/imagee9e6a6785f528631.png" alt="imagee9e6a6785f528631.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/image3313aa102c23da8f.png" alt="image3313aa102c23da8f.png"><br>4. 数据库备份与恢复</p><ul><li>数据库备份<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p linuxprobe &gt;  haha.dump</span><br></pre></td></tr></table></figure></li><li>数据库恢复<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p linuxprobe &lt; haha.dump</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;redhat7默认的数据库是mariadb，使用语法与mysql一致。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="mariadb" scheme="https://dana5haw.com/tags/mariadb/"/>
    
  </entry>
  
  <entry>
    <title>redhat7使用PXE+kickstart无人值守安装系统</title>
    <link href="https://dana5haw.com/posts/redhat7-PXE-kickstart-auto-install-system.html"/>
    <id>https://dana5haw.com/posts/redhat7-PXE-kickstart-auto-install-system.html</id>
    <published>2020-07-12T07:52:26.000Z</published>
    <updated>2020-07-12T08:35:01.371Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>redhat配置PXE+kickstart，自动为同网段服务器安装系统。</p><a id="more"></a><h2 id="PXE-kickstart配置"><a href="#PXE-kickstart配置" class="headerlink" title="PXE+kickstart配置"></a>PXE+kickstart配置</h2><p>IP地址：192.168.0.106<br>网卡配置：仅主机模式</p><ol><li>配置DHCP服务</li></ol><ul><li>安装dhcp<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dhcp</span><br></pre></td></tr></table></figure></li><li>编辑配置文件/etc/dhcp/dhcpd.conf<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">allow booting;</span><br><span class="line">allow bootp;</span><br><span class="line">ddns-update-style none;</span><br><span class="line">ignore client-updates;</span><br><span class="line">subnet 192.168.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">option subnet-mask 255.255.255.0;</span><br><span class="line">option domain-name-servers 8.8.8.8;</span><br><span class="line">range dynamic-bootp 192.168.0.50 192.168.0.250; #为客户端自动分配IP地址，地址范围192.168.0.50~192.168.0.250</span><br><span class="line">default-lease-time 21600;</span><br><span class="line">max-lease-time 43200;</span><br><span class="line">next-server 192.168.0.106; #网关设置为本机IP</span><br><span class="line">filename &quot;pxelinux.0&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>重启dhcpd服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart dhcpd</span><br><span class="line">systemctl enable dhcpd</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>配置tftp服务</li></ol><ul><li>安装tfp-server<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install tftp-server</span><br></pre></td></tr></table></figure></li><li>修改配置文件/etc/xinetd.d/tftp<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/image.png" alt="image.png"></li><li>重启xinetd服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart xinetd</span><br><span class="line">systemctl enable xinetd</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>配置syslinux</li></ol><ul><li>安装syslinux<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install syslinux</span><br></pre></td></tr></table></figure></li><li>将syslinux的配置文件拷贝到tftp服务的目录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;usr&#x2F;share&#x2F;syslinux&#x2F;pxelinux.0 &#x2F;var&#x2F;lib&#x2F;tftpboot&#x2F;</span><br><span class="line">cp &#x2F;media&#x2F;cdrom&#x2F;isolinux&#x2F;&#123;vesamenu.c32,boot.msg&#125; &#x2F;var&#x2F;lib&#x2F;tftpboot&#x2F;</span><br><span class="line">cp &#x2F;media&#x2F;cdrom&#x2F;images&#x2F;pxeboot&#x2F;&#123;vmlinuz,initrd.img&#125; &#x2F;var&#x2F;lib&#x2F;tftpboot&#x2F;</span><br><span class="line">cd &#x2F;var&#x2F;lib&#x2F;tftpboot</span><br><span class="line">mkdir pxelinux.cfg</span><br><span class="line">cp &#x2F;media&#x2F;cdrom&#x2F;isolinux&#x2F;isolinux.cfg pxelinux.cfg&#x2F;default</span><br></pre></td></tr></table></figure></li><li>修改配置文件/var/lib/tftpboot/pxelinux.cfg/default<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/image24ccca6e728ebbaa.png" alt="image24ccca6e728ebbaa.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/image30676559fd011adf.png" alt="image30676559fd011adf.png"></li></ul><ol start="4"><li>配置http服务</li></ol><ul><li>安装httpd<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd</span><br></pre></td></tr></table></figure></li><li>拷贝镜像文件到http根目录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -rf &#x2F;media&#x2F;cdrom&#x2F;* &#x2F;var&#x2F;www&#x2F;html&#x2F;</span><br></pre></td></tr></table></figure></li><li>重启httpd服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd</span><br><span class="line">systemctl enable httpd</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>配置kickstart</li></ol><ul><li>编辑配置文件ks.cfg<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;var&#x2F;www&#x2F;html&#x2F;pub</span><br><span class="line">cp &#x2F;root&#x2F;anaconda-ks.cfg &#x2F;var&#x2F;www&#x2F;html&#x2F;pub</span><br><span class="line">cd &#x2F;var&#x2F;www&#x2F;html&#x2F;pub</span><br><span class="line">mv anaconda-ks.cfg ks.cfg</span><br><span class="line">chmod 755 ks.cfg</span><br></pre></td></tr></table></figure>配置文件修改以下内容：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/image82ca57f4a89f4b62.png" alt="image82ca57f4a89f4b62.png"></li><li>重启httpd服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure></li></ul><ol start="6"><li>清除防火墙规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure><h2 id="客户端验证无人值守安装"><a href="#客户端验证无人值守安装" class="headerlink" title="客户端验证无人值守安装"></a>客户端验证无人值守安装</h2>客户端设置：网卡模式为仅主机模式。设置完成后，即可进入自动安装系统，无需手动操作。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/imagec9670f281bf93bd6.png" alt="imagec9670f281bf93bd6.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/image1d0956854cc334e2.png" alt="image1d0956854cc334e2.png"><br>客户端分得的IP地址在DHCP地址池范围内：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/12/imageed657cda8f51f620.png" alt="imageed657cda8f51f620.png"></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;redhat配置PXE+kickstart，自动为同网段服务器安装系统。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="PXE" scheme="https://dana5haw.com/tags/PXE/"/>
    
      <category term="kickstart" scheme="https://dana5haw.com/tags/kickstart/"/>
    
      <category term="无人值守安装系统" scheme="https://dana5haw.com/tags/%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>redhat7使用iSCSI部署网络存储</title>
    <link href="https://dana5haw.com/posts/rehat7-iSCSI-network-store.html"/>
    <id>https://dana5haw.com/posts/rehat7-iSCSI-network-store.html</id>
    <published>2020-07-11T13:07:12.000Z</published>
    <updated>2020-07-11T14:04:51.376Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>两台电脑之间传输数据，最简单快速的方式，把硬盘拆下来，用iSCSI接口转接，将硬盘变成移动硬盘。</p><a id="more"></a><h2 id="服务端部署iSCSI"><a href="#服务端部署iSCSI" class="headerlink" title="服务端部署iSCSI"></a>服务端部署iSCSI</h2><p>服务端IP地址：192.168.0.106</p><ol><li>服务端新增4块硬盘，创建raid10磁盘阵列<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image6082175f65c8f591.png" alt="image6082175f65c8f591.png"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mdadm -Cv &#x2F;dev&#x2F;md0 -n 4 -l 10 &#x2F;dev&#x2F;sd[b-e] #创建raid10阵列</span><br><span class="line">mdadm -D &#x2F;dev&#x2F;md0 #检查磁盘阵列初始化是否完成</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image9bf4838232ce93ff.png" alt="image9bf4838232ce93ff.png"></li><li>安装target、tarfetd<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install targetd targetcli</span><br></pre></td></tr></table></figure></li><li>命令行输入targetcli进行iSCSI部署操作<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imagef8de3494ad4f9a20.png" alt="imagef8de3494ad4f9a20.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image9af18b96fed76baa.png" alt="image9af18b96fed76baa.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image7e8d0072172e9af6.png" alt="image7e8d0072172e9af6.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image51376da58243d471.png" alt="image51376da58243d471.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imagec172eb34c709922d.png" alt="imagec172eb34c709922d.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image6688416831e6421c.png" alt="image6688416831e6421c.png"><h2 id="验证iSCSI网络存储服务"><a href="#验证iSCSI网络存储服务" class="headerlink" title="验证iSCSI网络存储服务"></a>验证iSCSI网络存储服务</h2></li><li>linux客户端</li></ol><ul><li>编辑配置文件/etc/iscsi/initiatorname.iscsi<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image312788230cf5cde5.png" alt="image312788230cf5cde5.png"></li><li>重启服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart iscsid</span><br><span class="line">systemctl renable iscsid</span><br></pre></td></tr></table></figure></li><li>发现服务端<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m discovery -t st -p 192.168.0.106</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image33a37f20605b4266.png" alt="image33a37f20605b4266.png"></li><li>登录到服务端<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.dana.x8664:sn.b6176097698c -p 192.168.0.106 -l</span><br></pre></td></tr></table></figure></li><li>卸载服务端<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.dana.x8664:sn.b6176097698c -u</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>windows客户端<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image5fb28d2aa70f8080.png" alt="image5fb28d2aa70f8080.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image7914279380dd54e0.png" alt="image7914279380dd54e0.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imagea1a638ee565a432e.png" alt="imagea1a638ee565a432e.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image064ff2a8506390fe.png" alt="image064ff2a8506390fe.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image8cdab3925dc9727c.png" alt="image8cdab3925dc9727c.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image7ecfcc15bbc53f7d.png" alt="image7ecfcc15bbc53f7d.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image89a05f5e52f08513.png" alt="image89a05f5e52f08513.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image850319cd5ac9a91f.png" alt="image850319cd5ac9a91f.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image456a82072f09410a.png" alt="image456a82072f09410a.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image7ce4903c5d6965df.png" alt="image7ce4903c5d6965df.png"></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;两台电脑之间传输数据，最简单快速的方式，把硬盘拆下来，用iSCSI接口转接，将硬盘变成移动硬盘。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="iSCSI" scheme="https://dana5haw.com/tags/iSCSI/"/>
    
      <category term="网络存储" scheme="https://dana5haw.com/tags/%E7%BD%91%E7%BB%9C%E5%AD%98%E5%82%A8/"/>
    
  </entry>
  
  <entry>
    <title>redhat7部署squid服务</title>
    <link href="https://dana5haw.com/posts/redhat7-build-squid-server.html"/>
    <id>https://dana5haw.com/posts/redhat7-build-squid-server.html</id>
    <published>2020-07-11T02:37:46.000Z</published>
    <updated>2020-07-11T09:08:30.372Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>squid可正向代理、正向透明代理、反向代理。</p><a id="more"></a><h2 id="squid正向代理"><a href="#squid正向代理" class="headerlink" title="squid正向代理"></a>squid正向代理</h2><p>正向代理和SNAT原理类似。<br>服务端：两块网卡，一块连外网，一块连内网</p><ul><li>网卡一：桥接模式，连外网 </li><li>网卡二：仅主机模式，连内网，IP地址（192.168.0.106）<br>客户端：单网卡，仅主机模式，IP地址（192.168.0.102）<br>正向代理搭建过程：</li></ul><ol><li>配置双网卡</li></ol><ul><li>新增网卡<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image.png" alt="image.png"></li><li>开启新增网卡<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image265c2b32707a5a1b.png" alt="image265c2b32707a5a1b.png"></li><li>配置网卡<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nm-connection-editor #进入图形化界面配置网卡</span><br></pre></td></tr></table></figure></li><li>外网网卡配置<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image7140b2e3e4527852.png" alt="image7140b2e3e4527852.png"></li><li>内网网卡配置<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image1600272b0e2e2222.png" alt="image1600272b0e2e2222.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image927d534047159c16.png" alt="image927d534047159c16.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image60c900cb240b5142.png" alt="image60c900cb240b5142.png"></li><li>重启网卡使配置生效<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image9b4429ed27c3a58b.png" alt="image9b4429ed27c3a58b.png"></li></ul><ol start="2"><li>安装squid<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install squid</span><br></pre></td></tr></table></figure></li><li>清除防火墙规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li>重启squid并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart squid</span><br><span class="line">systemctl enable squid</span><br></pre></td></tr></table></figure></li><li>客户端验证正向代理<br>客户端是仅主机模式，本身无法访问互联网网站，但是经过服务端的正向代理后，就可以访问互联网。</li></ol><ul><li>客户端浏览器设置代理：设置为服务端的3128端口（squid服务默认端口）<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image70e74e9682a1191a.png" alt="image70e74e9682a1191a.png"></li><li>检查客户端是否能访问互联网网站<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image49f4a88c22965db1.png" alt="image49f4a88c22965db1.png"></li></ul><ol start="6"><li>正向代理设置访问控制</li></ol><ul><li>禁止url含有特定词的访问</li></ul><p>（1）修改配置文件/etc/squid/squid.conf，增加以下语句：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image4f6951b33296de8a.png" alt="image4f6951b33296de8a.png"><br>（2）重启squid服务使配置生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart squid</span><br></pre></td></tr></table></figure><p>（3）验证：url里面含有linux，已被squid拦截。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image0348992fed9143de.png" alt="image0348992fed9143de.png"></p><ul><li>仅允许某个IP使用正向代理服务</li></ul><p>（1）修改配置文件/etc/squid/squid.conf，增加以下语句：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imageeb5cb2c90fcdc01b.png" alt="imageeb5cb2c90fcdc01b.png"><br>（2）重启squid服务使配置生效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart squid</span><br></pre></td></tr></table></figure><p>（3）验证：将客户端的IP改为其他IP地址，则无法使用正向代理访问互联网<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image5b7d495c01009ca8.png" alt="image5b7d495c01009ca8.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image529422e4ac01d2b4.png" alt="image529422e4ac01d2b4.png"></p><ol start="7"><li>服务端设置正向透明代理<br>透明代理是对客户端而言，客户端不用在浏览器设置代理，就是透明代理。以下是正向透明代理的设置方法：</li></ol><ul><li>修改配置文件/etc/squid/squid.conf，修改以下语句：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image66787df57652fefe.png" alt="image66787df57652fefe.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image82735d8d4a7624b4.png" alt="image82735d8d4a7624b4.png"></li><li>检查配置文件语法是否正确<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">squid -k parse</span><br></pre></td></tr></table></figure></li><li>停止squid服务，初始化透明模式的squid配置<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image439cf4390b7aa491.png" alt="image439cf4390b7aa491.png"></li><li>重启squid服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart squid</span><br></pre></td></tr></table></figure></li><li>服务端设置防火墙策略，使客户端与服务端共用外网网卡访问互联网<br>（1）方法一：通过iptables设置转发策略<br>开启DNS服务的数据转发功能，允许squid转发IPv4数据包<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">iptables -t nat -A POSTROUTING -p udp --dport 53 -o eno16777736 -j MASQUERADE</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image672695e7696f852d.png" alt="image672695e7696f852d.png"><br>把客户端的80端口请求转发到服务端的3128端口（squid服务的端口），并且对客户端的IP做SNAT（源地址转换，使得客户端与服务端共用外网网卡）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -p tcp -m tcp --dport 80 -j  REDIRECT --to-ports 3128</span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.0.102 -o eno16777736 -j SNAT --to 192.168.43.208</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image9f3f73a7e1eed80f.png" alt="image9f3f73a7e1eed80f.png"><br>（2）方法二：通过firewalld-config设置转发策略<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imagecb1b5596770b28bd.png" alt="imagecb1b5596770b28bd.png"></li><li>客户端修改网卡配置，将网关设置为服务端IP地址192.168.0.106，DNS服务设置为8.8.8.8。浏览器不设置代理，即可访问互联网网站。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image6279dfa426002e43.png" alt="image6279dfa426002e43.png"></li></ul><h2 id="squid反向代理"><a href="#squid反向代理" class="headerlink" title="squid反向代理"></a>squid反向代理</h2><p>就是可以在用代理服务器的IP地址访问到网站内容，看起来这个网站就是代理服务器自己做的一样。说得通俗一点，就是偷别人的作品，冠上自己的姓名。以下是squid反向代理的配置方法：<br>重新做一台squid代理服务器，只需要一张桥接网卡，可连外网。</p><ul><li>安装squid<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install squid</span><br></pre></td></tr></table></figure></li><li>修改配置文件/etc/squid/squid.conf<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http_port 192.168.43.208:80 vhost #将本机外网网卡地址设置为虚拟主机</span><br><span class="line">cache_peer 122.142.74.150 parent 80 0  originserver #同步目标服务器的网站内容</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/image629638bce63ab274.png" alt="image629638bce63ab274.png"></li><li>重启squid服务并 加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart squid</span><br><span class="line">systemctl enable squid</span><br></pre></td></tr></table></figure></li><li>在浏览器输入本机地址，即可访问到目标网站（<a href="http://www.jldaren.com）的内容，和原站一模一样" target="_blank" rel="noopener">www.jldaren.com）的内容，和原站一模一样</a><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imageb623a21ac4f98893.png" alt="imageb623a21ac4f98893.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/11/imagea38a90f80016fbd2.png" alt="imagea38a90f80016fbd2.png"></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;squid可正向代理、正向透明代理、反向代理。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="squid" scheme="https://dana5haw.com/tags/squid/"/>
    
  </entry>
  
  <entry>
    <title>redhat7搭建邮局postfix+dovecot+outlook</title>
    <link href="https://dana5haw.com/posts/redhat7-postfix-dovecot-outlook.html"/>
    <id>https://dana5haw.com/posts/redhat7-postfix-dovecot-outlook.html</id>
    <published>2020-07-09T16:43:30.000Z</published>
    <updated>2020-07-09T17:57:26.894Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>redhat7搭建邮局：postfix+dovecot+outlook。使用outlook作为收发客户端，postfix作为发件端、dovecot作为收件端。</p><a id="more"></a><h2 id="搭建邮局"><a href="#搭建邮局" class="headerlink" title="搭建邮局"></a>搭建邮局</h2><ol><li>部署DNS正向解析</li></ol><ul><li>安装bind-chroot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind-chroot</span><br></pre></td></tr></table></figure></li><li>编辑配置文件/etc/named.conf<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image7ced7106b31c31a9.png" alt="image7ced7106b31c31a9.png"></li><li>编辑区域配置文件/etc/named.rfc1912.zones<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;linuxcool.com&quot; IN &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;linuxcool.com.zone&quot;;</span><br><span class="line">allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li>拷贝正向解析文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;var&#x2F;named&#x2F;</span><br><span class="line">cp -a named.localhost linuxcool.com.zone</span><br></pre></td></tr></table></figure></li><li>编辑正向解析文件linuxcool.com.zone<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  linuxcool.com. root.linuxcool.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.linuxcool.com.</span><br><span class="line">ns      IN A    192.168.0.106</span><br><span class="line">mail    IN A    192.168.0.106</span><br><span class="line">@       IN MX 10 mail.linuxcool.com.</span><br></pre></td></tr></table></figure></li><li>重启DNS服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br><span class="line">systemctl enable named</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>设置主机名（永久修改）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname mail.linuxcool.com</span><br></pre></td></tr></table></figure></li><li>配置postfix发件服务</li></ol><ul><li>编辑配置文件/etc/postfix/main.cf<br>设置myhostname、mydomain、myorigin这三个变量：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image69c54a8015c99773.png" alt="image69c54a8015c99773.png"><br>设置网卡监听地址：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image69dd1432b9570be3.png" alt="image69dd1432b9570be3.png"><br>设置邮件接收方的主机名或域名：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/imagee5cb9cee3ea2554f.png" alt="imagee5cb9cee3ea2554f.png"></li><li>重启postfix服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart postfix</span><br><span class="line">systemctl enable postfix</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>部署dovecot收件服务</li></ol><ul><li>增加用户kk，并设置密码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd kk</span><br><span class="line">passwd kk</span><br></pre></td></tr></table></figure></li><li>安装dovecot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dovecot</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件/etc/dovecot/dovecot.conf<br>取消注释第24行，新增第25行（允许非密文登录）<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image7ddbb9609df3f423.png" alt="image7ddbb9609df3f423.png"><br>第48行，设置允许登录的网段范围<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image3e051af8b5e55e9d.png" alt="image3e051af8b5e55e9d.png"></li><li>编辑配置文件/etc/dovecot/conf.d/10-mail.conf，取消注释第25行<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/imagea03b4c9df318798b.png" alt="imagea03b4c9df318798b.png"></li><li>登录到kk用户，创建目录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su - kk</span><br><span class="line">mkdir -p mail&#x2F;.iamp&#x2F;INBOX</span><br></pre></td></tr></table></figure></li><li>设置变量alias，把xxoo作为root的虚拟用户<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;aliases</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image79944858dee6c333.png" alt="image79944858dee6c333.png"></li><li>重启dovecot服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart dovecot</span><br><span class="line">systemctl enable dovecot</span><br></pre></td></tr></table></figure><h2 id="使用outlook测试邮局"><a href="#使用outlook测试邮局" class="headerlink" title="使用outlook测试邮局"></a>使用outlook测试邮局</h2></li><li>outlook邮件设置：网关和DNS设置为服务端的IP地址<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image.png" alt="image.png"></li><li>测试发送邮件到root用户<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image73696f02bb61c9ad.png" alt="image73696f02bb61c9ad.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image6f98ab3c6857f179.png" alt="image6f98ab3c6857f179.png"></li><li>测试发送邮件到xxoo用户（这是一个虚拟用户，实际不存在），xxoo用户会把邮件转发给root用户<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/imageb2e39528680a0c15.png" alt="imageb2e39528680a0c15.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/imagec3d9c9329d47a7a4.png" alt="imagec3d9c9329d47a7a4.png"></li><li>测试服务端root用户发送邮件到kk用户<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image5b870e44b330c5fc.png" alt="image5b870e44b330c5fc.png"></li></ul><hr><p>遇到一个问题：kk用户没有收到邮件。<br>原因分析：既然是收件出现问题，就检查一下服务端的dovecot服务，果然不正常，有如下报错：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image3f20e5343c9e7774.png" alt="image3f20e5343c9e7774.png"><br>参考官方解决方法，将/var/mail目录下的内容都 改为600权限，重启dovecot服务，问题解决。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 0600 &#x2F;var&#x2F;mail&#x2F;*</span><br><span class="line">systemctl restart dovecot</span><br></pre></td></tr></table></figure><p><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image55fb0bb46d4f9fa1.png" alt="image55fb0bb46d4f9fa1.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image3c41998b54160853.png" alt="image3c41998b54160853.png"><br>验证：现在kk用户可以收取到root发送的邮件了。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/10/image58cacaebcd0fd41d.png" alt="image58cacaebcd0fd41d.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;redhat7搭建邮局：postfix+dovecot+outlook。使用outlook作为收发客户端，postfix作为发件端、dovecot作为收件端。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="postfix" scheme="https://dana5haw.com/tags/postfix/"/>
    
      <category term="dovecot" scheme="https://dana5haw.com/tags/dovecot/"/>
    
      <category term="outlook" scheme="https://dana5haw.com/tags/outlook/"/>
    
  </entry>
  
  <entry>
    <title>redhat7部署DHCP服务</title>
    <link href="https://dana5haw.com/posts/redhat7-DHCP.html"/>
    <id>https://dana5haw.com/posts/redhat7-DHCP.html</id>
    <published>2020-07-09T12:54:22.000Z</published>
    <updated>2020-07-09T13:30:47.911Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>作为DHCP服务器端，需要设置静态IP地址。并且服务端和客户端都得是仅主机模式。</p><a id="more"></a><h2 id="服务端部署DHCP服务"><a href="#服务端部署DHCP服务" class="headerlink" title="服务端部署DHCP服务"></a>服务端部署DHCP服务</h2><ul><li>服务端网卡设置，重启网卡使配置生效<br>IP地址：192.168.0.20<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/image.png" alt="image.png"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network #重启网卡</span><br></pre></td></tr></table></figure></li><li>安装dhcp软件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dhcp</span><br></pre></td></tr></table></figure></li><li>编辑dhcp服务配置文件<code>/etc/dhcp/dhcpd.conf</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ddns-update-style none;</span><br><span class="line">ignore client-updates;</span><br><span class="line">subnet 192.168.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">range 192.168.0.50 192.168.0.100; #IP地址池</span><br><span class="line">option subnet-mask 255.255.255.0; #子网掩码</span><br><span class="line">option routers 192.168.0.20; #路由器</span><br><span class="line">option domain-name-servers 192.168.0.20; #DHCP服务器的IP地址</span><br><span class="line">default-lease-time 21600; #默认租约</span><br><span class="line">max-lease-time 43200; #最长租约</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>启动DHCP服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start dhcpd</span><br><span class="line">systemctl enable dhcpd</span><br></pre></td></tr></table></figure></li><li>清除iptables规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure><h2 id="客户端验证DHCP服务器效果"><a href="#客户端验证DHCP服务器效果" class="headerlink" title="客户端验证DHCP服务器效果"></a>客户端验证DHCP服务器效果</h2></li><li>编辑虚拟机网络编辑器，取消DHCP的设置<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/image40d8da1bf24c05d3.png" alt="image40d8da1bf24c05d3.png"></li><li>设置网卡，改成DHCP方式获取IP地址，重启网卡使配置生效<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/image44ab240a1b5043c2.png" alt="image44ab240a1b5043c2.png"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure></li><li>检查机器获取到的IP地址，已获取到DHCP服务器地址池里面随机分配的地址<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/imageb5b8d32ddb4c1d0d.png" alt="imageb5b8d32ddb4c1d0d.png"><h2 id="服务端可查看客户端的MAC地址"><a href="#服务端可查看客户端的MAC地址" class="headerlink" title="服务端可查看客户端的MAC地址"></a>服务端可查看客户端的MAC地址</h2></li><li>重启客户端的网卡，查看服务端的日志，可找到客户端使用DHCP服务的详情，包括客户端的MAC地址<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f &#x2F;var&#x2F;log&#x2F;messages</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/imageb3c3b368e25ab25b.png" alt="imageb3c3b368e25ab25b.png"><h2 id="服务端为某个客户端分配固定的IP地址"><a href="#服务端为某个客户端分配固定的IP地址" class="headerlink" title="服务端为某个客户端分配固定的IP地址"></a>服务端为某个客户端分配固定的IP地址</h2></li><li>服务端配置文件添加以下内容，将客户端的MAC地址和固定IP地址做绑定<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">host dana&#123;</span><br><span class="line">        hardware ethernet 00:0c:29:1b:b1:9d;</span><br><span class="line">        fixed-address 192.168.0.66;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/imageca35b36e6528b081.png" alt="imageca35b36e6528b081.png"></li><li>服务端重启dhcp服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart dhcpd</span><br></pre></td></tr></table></figure></li><li>客户端重启网卡，检查机器获取的IP地址是否是服务端分配的IP<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/09/image2494cb3bf40a8e29.png" alt="image2494cb3bf40a8e29.png"></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;作为DHCP服务器端，需要设置静态IP地址。并且服务端和客户端都得是仅主机模式。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="DHCP" scheme="https://dana5haw.com/tags/DHCP/"/>
    
  </entry>
  
  <entry>
    <title>DNS分离解析服务搭建</title>
    <link href="https://dana5haw.com/posts/DNS-seperate-explanation.html"/>
    <id>https://dana5haw.com/posts/DNS-seperate-explanation.html</id>
    <published>2020-07-04T09:21:34.000Z</published>
    <updated>2020-07-04T10:54:20.218Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>DNS分离解析实现的效果就是，同一个域名，在不同地区解析出的IP地址不同。很常用，目的是加快用户访问网站的速度，比如：cdn加速。</p><a id="more"></a><h2 id="DNS分离解析服务搭建"><a href="#DNS分离解析服务搭建" class="headerlink" title="DNS分离解析服务搭建"></a>DNS分离解析服务搭建</h2><p>DNS服务器：</p><ul><li>北京网络：122.71.115.1</li><li>美国网络：106.185.25.1<br>客户端：</li><li>北京用户：122.71.115.10</li><li>美国用户：106.185.25.10</li></ul><ol><li>安装bind-chroot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind-chroot</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件<code>/etc/named.conf</code>，改为any，并删除根域信息。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image3b61f8066837cf2b.png" alt="image3b61f8066837cf2b.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image5efa1af0d50dd0be.png" alt="image5efa1af0d50dd0be.png"></li><li>编辑区域配置文件<code>/etc/named.rfc1912.zones</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">acl &quot;china&quot; &#123; 122.71.115.0&#x2F;24; &#125;;</span><br><span class="line">acl &quot;america&quot; &#123; 106.185.25.0&#x2F;24; &#125;;</span><br><span class="line">view &quot;china&quot; &#123;</span><br><span class="line">match-clients &#123; &quot;china&quot;; &#125;;</span><br><span class="line">zone &quot;linuxprobe.com&quot; &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;linuxprobe.com.china&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line">view &quot;america&quot; &#123;</span><br><span class="line">match-clients &#123; &quot;america&quot;; &#125;;</span><br><span class="line">zone &quot;linuxprobe.com&quot; &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;linuxprobe.com.america&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li>拷贝正向解析模板<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -a &#x2F;var&#x2F;named&#x2F;named.local &#x2F;var&#x2F;named&#x2F;linuxprobe.com.china #北京用户正向解析文件</span><br><span class="line">cp -a &#x2F;var&#x2F;named&#x2F;named.local &#x2F;var&#x2F;named&#x2F;linuxprobe.com.america #美国用户正向解析文件</span><br></pre></td></tr></table></figure></li><li>编辑正向解析文件</li></ol><ul><li>编辑北京用户正向解析文件<code>/var/named/linuxprobe.com.china</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  linuxprobe.com. root.linuxprobe.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.linuxprobe.com.</span><br><span class="line">ns      IN A    122.71.115.1</span><br><span class="line">www     IN A    122.71.115.1</span><br></pre></td></tr></table></figure></li><li>编辑美国用户正向解析文件<code>/var/named/linuxprobe.com.america</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  linuxprobe.com. root.linuxprobe.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.linuxprobe.com.</span><br><span class="line">ns      IN A    106.185.25.1</span><br><span class="line">www     IN A    106.185.25.1</span><br></pre></td></tr></table></figure></li></ul><ol start="6"><li>清空防火墙规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li>设置网卡信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmtui #进入图形化界面配置网卡信息</span><br><span class="line">systemctl restart network #重启网卡使配置生效</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/imagedf8d626ac2a67a74.png" alt="imagedf8d626ac2a67a74.png"></li><li>开启DNS服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start named</span><br><span class="line">systemctl enable named</span><br></pre></td></tr></table></figure></li></ol><h2 id="验证DNS分离解析服务的效果"><a href="#验证DNS分离解析服务的效果" class="headerlink" title="验证DNS分离解析服务的效果"></a>验证DNS分离解析服务的效果</h2><p>开启一台可以连外网的客户端（网卡为桥接模式），更改IP地址分别模拟北京用户和美国用户，观察域名<a href="http://www.linuxprobe.com解析出的IP地址是多少。" target="_blank" rel="noopener">www.linuxprobe.com解析出的IP地址是多少。</a></p><ul><li>模拟北京用户<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmtui #进入图形化界面配置网卡信息</span><br><span class="line">systemctl restart network #重启网卡使配置生效</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image3c70a91180774d01.png" alt="image3c70a91180774d01.png"><br>测试分离解析是否成功<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.linuxprobe.com #解析出的IP是北京网络，就说明分离解析成功</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image02894ecf9a80b752.png" alt="image02894ecf9a80b752.png"></li><li>模拟美国用户<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmtui #进入图形化界面配置网卡信息</span><br><span class="line">systemctl restart network #重启网卡使配置生效</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image804c56d8f8973430.png" alt="image804c56d8f8973430.png"><br>测试分离解析是否成功<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.linuxprobe.com #解析出的IP是美国网络，就说明分离解析成功</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image502a16fd9de744a5.png" alt="image502a16fd9de744a5.png"></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;DNS分离解析实现的效果就是，同一个域名，在不同地区解析出的IP地址不同。很常用，目的是加快用户访问网站的速度，比如：cdn加速。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="DNS分离解析" scheme="https://dana5haw.com/tags/DNS%E5%88%86%E7%A6%BB%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>DNS缓存服务搭建</title>
    <link href="https://dana5haw.com/posts/DNS-cache-server.html"/>
    <id>https://dana5haw.com/posts/DNS-cache-server.html</id>
    <published>2020-07-04T09:21:15.000Z</published>
    <updated>2020-07-04T10:02:57.685Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>DNS缓存服务是为了加快用户访问网站的速度。</p><a id="more"></a><h2 id="DNS缓存服务器搭建"><a href="#DNS缓存服务器搭建" class="headerlink" title="DNS缓存服务器搭建"></a>DNS缓存服务器搭建</h2><p>缓存服务器(双网卡)：</p><ul><li>网卡一：桥接模式</li><li>网卡二：仅主机模式，192.168.0.106<br>客户端（仅主机模式）：192.168.0.102</li></ul><ol><li>缓存服务器设置</li></ol><ul><li>添加双网卡，一个连外网、一个连内网<br>连外网的网卡：设置为桥接模式<br>连内网的网卡：设置为仅主机模式，IP地址设置为192.168.0.106</li><li>安装bind-chroot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind-chroot</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件<code>/etc/named.conf</code><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image78b27f29415d80dc.png" alt="image78b27f29415d80dc.png"></li><li>编辑配置文件<code>/etc/sysctl.conf</code>，写入下面这句，开启ipv4转发功能<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward &#x3D; 1</span><br></pre></td></tr></table></figure>输入命令<code>sysctl -p</code>立即生效</li><li>清除防火墙规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li>开启DNS服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start named</span><br><span class="line">systemctl enable named</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>客户端配置</li></ol><ul><li>设置网卡信息，网关和DNS服务器设置为缓存服务器的IP地址192.168.0.106<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nm-connection-editor #进入图形化界面配置IP信息</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image5e5effb880c24fdc.png" alt="image5e5effb880c24fdc.png"></li><li>验证DNS缓存服务的效果<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping 192.168.0.106 #保证能够ping通DNS缓存服务器的IP地址</span><br><span class="line">nslookup www.baidu.com #目前无法获取到缓存DNS信息，应该是DNS服务器（114.114.114.114）有限制</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image09493880cf1839e6.png" alt="image09493880cf1839e6.png"></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;DNS缓存服务是为了加快用户访问网站的速度。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="DNS缓存服务" scheme="https://dana5haw.com/tags/DNS%E7%BC%93%E5%AD%98%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>使用TISG加密机制增强DNS服务器之间数据传输的安全性</title>
    <link href="https://dana5haw.com/posts/TISG-DNS-master-slave-safe-transfer.html"/>
    <id>https://dana5haw.com/posts/TISG-DNS-master-slave-safe-transfer.html</id>
    <published>2020-07-04T07:29:58.000Z</published>
    <updated>2020-07-04T10:58:59.041Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>为了确保DNS主从服务器之间数据传输的安全性，可使用TISG加密机制传输数据。</p><a id="more"></a><h2 id="TISG加密机制传输数据"><a href="#TISG加密机制传输数据" class="headerlink" title="TISG加密机制传输数据"></a>TISG加密机制传输数据</h2><p>主服务器：192.168.0.106<br>从服务器：192.168.0.102</p><ol><li>主服务器配置</li></ol><ul><li>使用dnssec-keygen生成密钥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">dnssec-keygen -a HMAC-MD5 -b 128 -n HOST master-slave</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>解析：<code>-a</code>参数，指的是加密算法类型。<br><code>-b</code>参数，指的是密钥长度。<br><code>-n</code>参数，指的是密钥类型。<br><code>master-salve</code>是自定义的密钥名称。</p>          </div>我们需要用到私钥的key。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image35d6b3e9c4032c01.png" alt="image35d6b3e9c4032c01.png"></li><li>编辑密钥传输文件<code>/var/named/chroot/etc/tansfer.key</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">key &quot;master-slave&quot; &#123;</span><br><span class="line">algorithm hmac-md5;</span><br><span class="line">secret &quot;1g7++KPRr3ZIbf7szGO2gw&#x3D;&#x3D;&quot;; #刚刚生成的私钥的key</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image05527506e3684c3f.png" alt="image05527506e3684c3f.png"></li><li>设置密钥传输文件的权限<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 640 &#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;transfer.key</span><br><span class="line">chown root:named &#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;transfer.key</span><br></pre></td></tr></table></figure></li><li>将密钥传输文件链接到/etc目录 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln &#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;transfer.key &#x2F;etc</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件/etc/named.conf，增加以下两句<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image8992a90ca8278ac8.png" alt="image8992a90ca8278ac8.png"></li><li>清除iptables规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li>重启DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>从服务器配置</li></ol><ul><li>删除已从主服务器同步的正向解析文件和反向解析文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf &#x2F;var&#x2F;named&#x2F;slaves&#x2F;*</span><br></pre></td></tr></table></figure></li><li>从主服务器拷贝transfer.key文件，放到/var/named/chroot/etc目录</li><li>设置密钥传输文件的权限<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 640 &#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;transfer.key</span><br><span class="line">chown root:named &#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;transfer.key</span><br></pre></td></tr></table></figure></li><li>将密钥传输文件链接到/etc目录 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln &#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;transfer.key &#x2F;etc</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件/etc/named.conf，增加以下部分<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image4f1df0f4771bdc68.png" alt="image4f1df0f4771bdc68.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/imagedb0144bcba5c4a67.png" alt="imagedb0144bcba5c4a67.png"></li><li>重启DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure></li><li>检查是否成功从主服务器同步正向解析文件和反向解析文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls &#x2F;var&#x2F;named&#x2F;slaves</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image44d442f2657c8a1b.png" alt="image44d442f2657c8a1b.png"></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;为了确保DNS主从服务器之间数据传输的安全性，可使用TISG加密机制传输数据。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="TISG加密" scheme="https://dana5haw.com/tags/TISG%E5%8A%A0%E5%AF%86/"/>
    
      <category term="DNS服务数据传输安全" scheme="https://dana5haw.com/tags/DNS%E6%9C%8D%E5%8A%A1%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>redhat7搭建DNS服务-主从DNS服务器同步</title>
    <link href="https://dana5haw.com/posts/redhat7-DNS-master-slave-sync.html"/>
    <id>https://dana5haw.com/posts/redhat7-DNS-master-slave-sync.html</id>
    <published>2020-07-04T06:22:24.000Z</published>
    <updated>2020-07-04T07:03:07.383Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>搭建DNS主从服务同步，基于<a href="https://dana5haw.com/posts/rehat7-DNS-bind-chroot">上一篇</a></p><a id="more"></a><h2 id="搭建DNS主从服务"><a href="#搭建DNS主从服务" class="headerlink" title="搭建DNS主从服务"></a>搭建DNS主从服务</h2><p>主服务器：192.168.0.106<br>从服务器：192.168.0.102</p><ol><li>从服务器配置</li></ol><ul><li>安装bind-chroot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind-chroot</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件<code>/etc/named.conf</code><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image0d91dbc7dcdc6728.png" alt="image0d91dbc7dcdc6728.png"><br>改为any：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image.png" alt="image.png"></li><li>编辑区域配置文件<code>/etc/named.rfc1912.zones</code>，从主服务器同步DNS正向解析配置文件和反向解析配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;linuxprobe.com&quot; IN &#123;</span><br><span class="line">type slave;</span><br><span class="line">file &quot;slaves&#x2F;linuxprobe.com.zone&quot;; #主从同步成功后，将会在&#x2F;var&#x2F;named&#x2F;slaves目录生成正向解析文件</span><br><span class="line">&#125;; #这部分区域是正向解析</span><br><span class="line">zone &quot;0.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">type slave;</span><br><span class="line">file &quot;slaves&#x2F;192.168.0.arpa&quot;; #主从同步成功后，将会在&#x2F;var&#x2F;named&#x2F;slaves目录生成反向解析文件</span><br><span class="line">&#125;; #这部分区域是反向解析</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>主服务器配置</li></ol><ul><li>修改区域配置文件<code>/etc/named.rfc1912.zones</code>，允许从服务器同步DNS正向解析配置文件和反向解析配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;linuxprobe.com&quot; IN &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;linuxprobe.com.zone&quot;;</span><br><span class="line">allow-update &#123; 192.168.0.102; &#125;; #这是从服务器的IP地址</span><br><span class="line">&#125;; #这部分区域是正向解析</span><br><span class="line">zone &quot;0.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;192.168.0.arpa&quot;;</span><br><span class="line">allow-update &#123; 192.168.0.102; &#125;; #这是从服务器的IP地址</span><br><span class="line">&#125;; #这部分区域是反向解析</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>测试DNS主从服务</li></ol><ul><li>主服务器清空iptables规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li>主服务器重启DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure></li><li>从服务器设置DNS服务器为本机192.168.0.102<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmtui #进入图形化界面配置网卡信息，修改DNS服务器为本机IP地址</span><br><span class="line">systemctl restart network #重启网卡使DNS服务配置生效</span><br></pre></td></tr></table></figure></li><li>从服务器启动DNS服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start named</span><br><span class="line">systemctl enable named</span><br></pre></td></tr></table></figure></li><li>检查从服务器是否成功同步主服务器的正向解析文件和反向解析文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls  &#x2F;var&#x2F;named&#x2F;slaves</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image9d5229b33cfee0af.png" alt="image9d5229b33cfee0af.png"><div class="note [class]">            <p>注意：从主服务器同步的正向解析文件和反向解析文件，在从服务器上看到是乱码。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image0158f96fd8b78464.png" alt="image0158f96fd8b78464.png"></p>          </div></li><li>检查从服务器是否能够成功使用主服务器的DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping www.linuxprobe.com #测试域名解析结果，解析的IP是192.168.0.106说明DNS正向解析生效</span><br><span class="line">host 192.168.0.106 #测试反向解析结果，解析的域名是www.linuxprobe.com说明DNS反向解析生效</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;搭建DNS主从服务同步，基于&lt;a href=&quot;https://dana5haw.com/posts/rehat7-DNS-bind-chroot&quot;&gt;上一篇&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="DNS服务" scheme="https://dana5haw.com/tags/DNS%E6%9C%8D%E5%8A%A1/"/>
    
      <category term="主从DNS服务同步" scheme="https://dana5haw.com/tags/%E4%B8%BB%E4%BB%8EDNS%E6%9C%8D%E5%8A%A1%E5%90%8C%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>redhat7搭建DNS服务-正向解析、反向解析</title>
    <link href="https://dana5haw.com/posts/rehat7-DNS-bind-chroot.html"/>
    <id>https://dana5haw.com/posts/rehat7-DNS-bind-chroot.html</id>
    <published>2020-07-04T05:50:03.000Z</published>
    <updated>2020-07-04T07:07:51.386Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>搭建DNS服务，实现正向解析和反向解析。正向解析：将域名解析为IP。反向解析：将IP解析为域名。</p><a id="more"></a><h2 id="搭建DNS服务"><a href="#搭建DNS服务" class="headerlink" title="搭建DNS服务"></a>搭建DNS服务</h2><ol><li>安装bind-chroot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind-chroot</span><br></pre></td></tr></table></figure></li><li>编辑主配置文件<code>/etc/named.conf</code><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image0d91dbc7dcdc6728.png" alt="image0d91dbc7dcdc6728.png"><br>改为any：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image.png" alt="image.png"></li><li>编辑区域配置文件<code>/etc/named.rfc1912.zones</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;linuxprobe.com&quot; IN &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;linuxprobe.com.zone&quot;;</span><br><span class="line">allow-update &#123; none; &#125;;</span><br><span class="line">&#125;; #这部分区域是正向解析</span><br><span class="line">zone &quot;0.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;192.168.0.arpa&quot;;</span><br><span class="line">allow-update &#123; none; &#125;;</span><br><span class="line">&#125;; #这部分区域是反向解析</span><br></pre></td></tr></table></figure></li><li>正向解析实验</li></ol><ul><li>将正向解析模板配置文件<code>/var/named/named.localhost</code>复制到<code>/var/named/linuxprobe.com.zone</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -a &#x2F;var&#x2F;named&#x2F;named.localhost &#x2F;var&#x2F;named&#x2F;linuxprobe.com.zone</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>注意：这里的cp命令带上了<code>-a</code>参数，指的是拷贝模板文件的所有属性，包括 所属主、所属组。</p>          </div><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image1bd5c450d28cdc83.png" alt="image1bd5c450d28cdc83.png"></li><li>编辑正向解析配置文件<code>/var/named/linuxprobe.com.zone</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  linuxprobe.com. root.linuxprobe.com (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.linuxprobe.com.</span><br><span class="line">ns      IN A    192.168.0.106</span><br><span class="line">www     IN A    192.168.0.106</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>解析：第二行<code>linuxprobe.com.</code>指的是DNS的区域，必须写域名的完整格式（最后一个<code>.</code>号不能漏写）。<code>root.linuxprobe.com</code>指的是域名管理员的邮箱。</p>          </div></li><li>启动DNS服务并加入开机启动项<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start named</span><br><span class="line">systemctl enable named</span><br></pre></td></tr></table></figure></li><li>测试DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmtui #进入图形化配置界面设置网卡信息，将DNS服务器设置为本机IP地址192.168.0.106</span><br><span class="line">systemctl restart network #重启网卡</span><br><span class="line">ping www.linuxprobe.com #测试域名解析结果，解析的IP是192.168.0.106说明DNS正向解析生效</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>反向解析实验</li></ol><ul><li>将反向解析模板配置文件<code>/var/named/named.loopback</code>复制到<code>/var/named/192.168.0.arpa</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -a &#x2F;var&#x2F;named&#x2F;named.loopback &#x2F;var&#x2F;named&#x2F;192.168.0.arpa</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>注意：这里的cp命令带上了<code>-a</code>参数，指的是拷贝模板文件的所有属性，包括 所属主、所属组。</p>          </div><img src="https://v2ray.dana5haw.com:8008/images/2020/07/04/image1bd5c450d28cdc83.png" alt="image1bd5c450d28cdc83.png"></li><li>编辑反向解析配置文件<code>/var/named/192.168.0.arpa</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  linuxprobe.com. root.linuxprobe.com (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.linuxprobe.com.</span><br><span class="line">ns      IN A    192.168.0.106</span><br><span class="line">106     PTR     www.linuxprobe.com</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>解析：第二行<code>linuxprobe.com.</code>指的是DNS的区域，必须写域名的完整格式（最后一个<code>.</code>号不能漏写）。<code>root.linuxprobe.com</code>指的是域名管理员的邮箱。<br>PTR是指针记录，仅用于反向解析 </p>          </div></li><li>重启DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure></li><li>测试DNS服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">host 192.168.0.106 #测试反向解析结果，解析的域名是www.linuxprobe.com说明DNS反向解析生效</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;搭建DNS服务，实现正向解析和反向解析。正向解析：将域名解析为IP。反向解析：将IP解析为域名。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="DNS服务" scheme="https://dana5haw.com/tags/DNS%E6%9C%8D%E5%8A%A1/"/>
    
      <category term="正向解析" scheme="https://dana5haw.com/tags/%E6%AD%A3%E5%90%91%E8%A7%A3%E6%9E%90/"/>
    
      <category term="反向解析" scheme="https://dana5haw.com/tags/%E5%8F%8D%E5%90%91%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>autofs自动挂载服务</title>
    <link href="https://dana5haw.com/posts/redhat7-autofs.html"/>
    <id>https://dana5haw.com/posts/redhat7-autofs.html</id>
    <published>2020-07-02T16:41:13.000Z</published>
    <updated>2020-07-04T06:53:19.892Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>重启机器使用yum之前，都得挂载一下yum仓库，实在很费时间。</p><a id="more"></a><h2 id="autofs自动挂载服务设置"><a href="#autofs自动挂载服务设置" class="headerlink" title="autofs自动挂载服务设置"></a>autofs自动挂载服务设置</h2><ol><li>安装autofs软件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install autofs</span><br></pre></td></tr></table></figure></li><li>编辑autofs主配置文件<code>/etc/auto.master</code><br>增加这一句：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;media &#x2F;etc&#x2F;iso.misc</span><br></pre></td></tr></table></figure></li><li>编辑配置文件<code>/etc/iso.misc</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iso -fstype&#x3D;iso9660 :&#x2F;dev&#x2F;cdrom</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>解析：linux系统中，<code>iso</code>指的是挂载点：<code>/media/iso</code>。<br><code>-fstype=iso9660</code>指的是文件类型。<br><code>:/dev/cdrom</code>指的是设备名称。</p>          </div></li><li>重启autofs服务生效<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart autofs</span><br></pre></td></tr></table></figure><h2 id="实验现象"><a href="#实验现象" class="headerlink" title="实验现象"></a>实验现象</h2>进入到iso目录时，自动挂载设备到iso目录。目的是在需要挂载的时候去挂载设备，节省服务器的带宽资源。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/03/image.png" alt="image.png"></li></ol><h2 id="补充-开机自动挂载镜像"><a href="#补充-开机自动挂载镜像" class="headerlink" title="补充-开机自动挂载镜像"></a>补充-开机自动挂载镜像</h2><p>以上设置完成之后，还需要做一步操作，才可以实现镜像自动挂载。<br>那就是修改yum仓库配置文件<code>/etc/yum.repo.d/rhel7.repo</code>，把本机的挂载点改为/media/iso。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[rhel7]</span><br><span class="line">name&#x3D;rhel7</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;media&#x2F;iso</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;重启机器使用yum之前，都得挂载一下yum仓库，实在很费时间。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="autofs" scheme="https://dana5haw.com/tags/autofs/"/>
    
      <category term="自动挂载" scheme="https://dana5haw.com/tags/%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>redhat7自带的NFS服务实现Linux主机之间的目录共享</title>
    <link href="https://dana5haw.com/posts/redhat7-NFS-linux-share.html"/>
    <id>https://dana5haw.com/posts/redhat7-NFS-linux-share.html</id>
    <published>2020-07-02T16:04:51.000Z</published>
    <updated>2020-07-02T16:39:08.736Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>redhat7自带的NFS服务可以实现linux主机之间的目录共享，不需要额外安装其他服务。</p><a id="more"></a><h2 id="NFS实现linux主机之间的目录共享"><a href="#NFS实现linux主机之间的目录共享" class="headerlink" title="NFS实现linux主机之间的目录共享"></a>NFS实现linux主机之间的目录共享</h2><p>redhat7默认安装了nfs-utils软件，只需要使用即可。</p><ol><li>服务端创建共享目录，设置共享范围，清空防火墙规则，并重启服务</li></ol><ul><li><p>创建共享目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;linuxshare</span><br><span class="line">chmod -Rf 777 &#x2F;linuxshare</span><br></pre></td></tr></table></figure></li><li><p>设置共享范围：编辑<code>/etc/exports</code>文件<br>配置文件内容，只有一行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;linuxshare *(sync,rw,root_squash)</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>解析：linux系统中，<code>*</code>指的是共享范围是所有人。<br><code>root_squash</code>是把客户端的root用户映射为匿名用户。举例：金正恩到中国，就没有中国主席的权限。</p>          </div></li><li><p>清空防火墙规则</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li><p>重启服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nfs-server</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>客户端创建挂载点<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;linuxshareclient</span><br><span class="line">chmod -Rf 777 &#x2F;linuxshareclient</span><br></pre></td></tr></table></figure></li><li>客户端挂载服务端的共享目录，即可实现linux主机之间的目录共享<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;fstab</span><br></pre></td></tr></table></figure></li></ol><ul><li>新增这一句，挂载上服务端的共享目录：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.0.106:&#x2F;linuxshare &#x2F;linuxshareclient nfs defaults 0 0</span><br></pre></td></tr></table></figure></li><li>挂载，重启服务即可生效：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br><span class="line">systemctl restart nfs-server</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;redhat7自带的NFS服务可以实现linux主机之间的目录共享，不需要额外安装其他服务。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="NFS服务" scheme="https://dana5haw.com/tags/NFS%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>redhat7搭建samba服务-linux与linux主机共享</title>
    <link href="https://dana5haw.com/posts/redhat7-build-samba-server-linux-to-linux.html"/>
    <id>https://dana5haw.com/posts/redhat7-build-samba-server-linux-to-linux.html</id>
    <published>2020-07-02T15:28:09.000Z</published>
    <updated>2020-07-02T17:10:33.523Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>利用cifs加密协议，samba服务实现linux和linux之间的文件共享。服务端和客户端都需要安装cifs-utils软件。</p><a id="more"></a><h2 id="设置cifs实现目录共享"><a href="#设置cifs实现目录共享" class="headerlink" title="设置cifs实现目录共享"></a>设置cifs实现目录共享</h2><p>环境：samba服务端已搭建好。</p><ol><li>服务端和客户端安装cifs-utils：切记，在机器重启之后，必须重新挂载yum仓库，否则yu无法正常使用！并且服务端一定要清除防火墙规则：<code>iptables -F</code>、<code>service iptables save</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install cifs-utils</span><br></pre></td></tr></table></figure></li><li>客户端创建共享目录挂载点<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;xkj</span><br><span class="line">chmod -Rf 777 &#x2F;xkj</span><br></pre></td></tr></table></figure></li><li>客户端设置samba密码文件，用于连接服务端samba服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;root</span><br><span class="line">vi auth.smb</span><br></pre></td></tr></table></figure></li></ol><details><summary>点击展开配置文件内容</summary><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">username&#x3D;sambaxkj</span><br><span class="line">password&#x3D;redhat</span><br><span class="line">domain&#x3D;WORKGROUP #samba服务端设置的工作组名称</span><br></pre></td></tr></table></figure></p></details><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 auth.smb #权限设置为只允许自己读写</span><br></pre></td></tr></table></figure><ol start="4"><li>客户端设置挂载信息，将服务端的共享目录挂载到本地<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;fstab</span><br></pre></td></tr></table></figure>新增这个挂载信息：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;192.168.0.106&#x2F;sambaxkj &#x2F;xkj cifs credentials&#x3D;&#x2F;root&#x2F;auth.smb 0 0</span><br></pre></td></tr></table></figure><div class="note [class]">            <p>解析：linux系统中，<code>//</code>用于访问samba服务；windows系统中，<code>\\</code>用于访问samba服务。<br><code>credentials</code>指的是挂载到samba服务端的凭据。</p>          </div>挂载即可生效：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;利用cifs加密协议，samba服务实现linux和linux之间的文件共享。服务端和客户端都需要安装cifs-utils软件。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat" scheme="https://dana5haw.com/tags/redhat/"/>
    
      <category term="samba服务" scheme="https://dana5haw.com/tags/samba%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>redhat7搭建samba服务-linux与windows主机共享</title>
    <link href="https://dana5haw.com/posts/redhat7-build-samba-server.html"/>
    <id>https://dana5haw.com/posts/redhat7-build-samba-server.html</id>
    <published>2020-07-02T13:29:43.000Z</published>
    <updated>2020-07-02T15:04:28.323Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>redhat7搭建samba服务，实现linux和windows之间的文件共享。</p><a id="more"></a><h2 id="搭建samba服务"><a href="#搭建samba服务" class="headerlink" title="搭建samba服务"></a>搭建samba服务</h2><ol><li>安装samba<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y samba</span><br></pre></td></tr></table></figure></li><li>配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;samba&#x2F;smb.conf</span><br></pre></td></tr></table></figure></li></ol><details><summary>点击展开配置文件内容</summary><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">workgroup &#x3D; MYGROUP</span><br><span class="line">server string &#x3D; MicroSoft Server 2003</span><br><span class="line">log file &#x3D; &#x2F;var&#x2F;log&#x2F;samba&#x2F;log.%m</span><br><span class="line">max log size &#x3D; 50</span><br><span class="line">security &#x3D; user</span><br><span class="line">passdb backend &#x3D; tdbsam</span><br><span class="line">[sambaxkj]</span><br><span class="line">comment &#x3D; do not delete it!</span><br><span class="line">path &#x3D; &#x2F;sambaxkj</span><br><span class="line">public &#x3D; no</span><br><span class="line">writable &#x3D; yes</span><br></pre></td></tr></table></figure></p></details><div class="note [class]">            <p>注意：testparam命令可以检查配置文件语法是否正确。</p>          </div><ol start="3"><li><p>创建共享目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;sambaxkj</span><br><span class="line">chmod -Rf 777 &#x2F;sambaxkj</span><br></pre></td></tr></table></figure></li><li><p>清空防火墙规则</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li><p>重启samba服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart smb</span><br></pre></td></tr></table></figure></li></ol><div class="note [class]">            <p>注意：重启失败，因为没有关闭selinux。关闭selinux之后即可正常启动samba服务。<br>临时关闭selinux；<code>setenforce 0</code></p>          </div><ol start="6"><li>创建samba用户<br>本地用户无法连接samba共享目录，必须 创建专用的samba用户，用于共享目录。</li></ol><ul><li>新增samba用户 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd sambaxkj</span><br></pre></td></tr></table></figure></li><li>设置samba用户的密码 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pdbedit -a -u sambaxkj</span><br></pre></td></tr></table></figure></li></ul><h2 id="测试文件共享服务"><a href="#测试文件共享服务" class="headerlink" title="测试文件共享服务"></a>测试文件共享服务</h2><p>在windows主机进入“运行”，输入<code>\\192.168.0.106</code>，（IP地址为linux虚拟机的IP地址），即可使用samba用户登录到linux主机的共享目录。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/02/image3737797bcaf9fc47.png" alt="image3737797bcaf9fc47.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/02/imagebad2fbf34f95b501.png" alt="imagebad2fbf34f95b501.png"><br>可实现linux主机和windows主机的目录共享，任意一方都可增删改共享目录里面的内容。</p><hr><p>打开selinux之后（setenforce 1），无法进入共享目录。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/07/02/image3b2eafe2f3714179.png" alt="image3b2eafe2f3714179.png"><br>这是什么原因导致的？<br>是selinux上下文的限制还是域的限制？<br>答案：是上下文的限制。</p><ul><li>查看与samba服务相关的sebool设置：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getsebool -a |grep samba</span><br></pre></td></tr></table></figure><img src="https://v2ray.dana5haw.com:8008/images/2020/07/02/image45dd94e9b113c328.png" alt="image45dd94e9b113c328.png"></li><li>打开samba_export_all_rw上下文，允许samba用户对共享目录可读可写<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P samba_export_all_rw&#x3D;on</span><br></pre></td></tr></table></figure></li><li>重启samba服务，现在samba用户就可以对共享目录做读写操作了<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart smb</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;redhat7搭建samba服务，实现linux和windows之间的文件共享。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat" scheme="https://dana5haw.com/tags/redhat/"/>
    
      <category term="samba服务" scheme="https://dana5haw.com/tags/samba%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>redhat7配置yum仓库的方法</title>
    <link href="https://dana5haw.com/posts/redhat7-config-yum-repo.html"/>
    <id>https://dana5haw.com/posts/redhat7-config-yum-repo.html</id>
    <published>2020-07-02T12:42:05.000Z</published>
    <updated>2020-07-02T12:57:18.596Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>老是记不住yum仓库怎么配置，经常遇到yum仓库配置不对引起的错误，在此记下redhat7的yum仓库配置方法。</p><a id="more"></a><h2 id="yum仓库配置方法"><a href="#yum仓库配置方法" class="headerlink" title="yum仓库配置方法"></a>yum仓库配置方法</h2><p>环境：redhat7</p><ol><li>编辑yum配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;etc&#x2F;yum.repo.d</span><br><span class="line">vi rhel7.repo</span><br></pre></td></tr></table></figure><details><summary>点击展开配置文件内容</summary><p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[rhel7]</span><br><span class="line">name&#x3D;rhel7</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;media&#x2F;cdrom</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure></p></details><ol start="2"><li>挂载光盘</li></ol><ul><li>创建挂载点<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;media&#x2F;cdrom</span><br></pre></td></tr></table></figure></li><li>挂载光盘<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount &#x2F;dev&#x2F;cdrom &#x2F;media&#x2F;cdrom</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;老是记不住yum仓库怎么配置，经常遇到yum仓库配置不对引起的错误，在此记下redhat7的yum仓库配置方法。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RHCE" scheme="https://dana5haw.com/categories/RHCE/"/>
    
    
      <category term="redhat7" scheme="https://dana5haw.com/tags/redhat7/"/>
    
      <category term="yum仓库" scheme="https://dana5haw.com/tags/yum%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>怎么下载官方win10的安装镜像</title>
    <link href="https://dana5haw.com/posts/download-windows10-iso-mirror.html"/>
    <id>https://dana5haw.com/posts/download-windows10-iso-mirror.html</id>
    <published>2020-06-29T10:37:45.000Z</published>
    <updated>2020-07-01T11:43:38.707Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>想装一个win10专业版的虚拟机 使用一下，win10的官方镜像还是去官网下载比较纯净。</p><a id="more"></a><h2 id="下载渠道"><a href="#下载渠道" class="headerlink" title="下载渠道"></a>下载渠道</h2><p>win10镜像官网下载地址：<a href="https://www.microsoft.com/zh-cn/software-download/windows10ISO/" target="_blank" rel="noopener">https://www.microsoft.com/zh-cn/software-download/windows10ISO/</a><br>这个地址，要在手机端打开，才可以进入到iso镜像下载页面。<br>于是在PC浏览器设置为手机模式，任选一款手机型号，刷新页面即可进入iso镜像下载页面。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/29/image.png" alt="image.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/29/image954b028096a46b59.png" alt="image954b028096a46b59.png"></p><h2 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h2><p>测试了几款下载软件，最好用的是motrix。好用的定义：不用注册账号、下载速度快。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p>参考了<a href="https://windows10.pro/microsoft-com-software-download-windows10-iso/" target="_blank" rel="noopener">这篇文章</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;想装一个win10专业版的虚拟机 使用一下，win10的官方镜像还是去官网下载比较纯净。&lt;/p&gt;
    
    </summary>
    
    
      <category term="windows" scheme="https://dana5haw.com/categories/windows/"/>
    
    
      <category term="win10官方iso镜像" scheme="https://dana5haw.com/tags/win10%E5%AE%98%E6%96%B9iso%E9%95%9C%E5%83%8F/"/>
    
  </entry>
  
  <entry>
    <title>谷歌浏览器安装crx扩展程序失败，怎么解决</title>
    <link href="https://dana5haw.com/posts/google-chrome-crx-failed-zip.html"/>
    <id>https://dana5haw.com/posts/google-chrome-crx-failed-zip.html</id>
    <published>2020-06-27T15:40:08.000Z</published>
    <updated>2020-06-27T15:57:09.685Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>新电脑用不了谷歌浏览器，我想的是，先把omega-proxy这个扩展程序装上，就可以代理上网，登录谷歌账号并开启冲浪之旅。但是把crx扩展程序拖到扩展程序安装，居然安装失败。怎么办？</p><a id="more"></a><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>在网上查到，有这样的解决方法：把crx文件重命名为zip或者rar，拖到扩展程序里面，自动解压，就可以安装成功。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/27/image.png" alt="image.png"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>参考了<a href="https://blog.csdn.net/wst0717/article/details/88867047" target="_blank" rel="noopener">这篇文章</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;新电脑用不了谷歌浏览器，我想的是，先把omega-proxy这个扩展程序装上，就可以代理上网，登录谷歌账号并开启冲浪之旅。但是把crx扩展程序拖到扩展程序安装，居然安装失败。怎么办？&lt;/p&gt;
    
    </summary>
    
    
      <category term="问题解决" scheme="https://dana5haw.com/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
      <category term="谷歌浏览器" scheme="https://dana5haw.com/categories/%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
    
      <category term="谷歌浏览器" scheme="https://dana5haw.com/tags/%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="扩展程序安装失败" scheme="https://dana5haw.com/tags/%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5/"/>
    
  </entry>
  
  <entry>
    <title>今天父亲节</title>
    <link href="https://dana5haw.com/posts/father&#39;s-day.html"/>
    <id>https://dana5haw.com/posts/father&#39;s-day.html</id>
    <published>2020-06-21T16:21:04.000Z</published>
    <updated>2020-06-27T14:12:28.847Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天父亲节，昨天听说今天是世界末日，今天有些地区似乎可以看到日环食。今天可真特殊。</p><a id="more"></a><h2 id="又画了一个电子卡片，用了新电脑"><a href="#又画了一个电子卡片，用了新电脑" class="headerlink" title="又画了一个电子卡片，用了新电脑"></a>又画了一个电子卡片，用了新电脑</h2><p><img src="https://v2ray.dana5haw.com:8008/images/2020/06/22/fd.gif" alt="fd.gif"></p><h2 id="感受"><a href="#感受" class="headerlink" title="感受"></a>感受</h2><p>要表达爱，只有表达出来，对方才能确认到，所以不要吝啬说爱。看到他人因自己而快乐，自己也得到快乐。</p><h2 id="永远猎奇永远鲜活"><a href="#永远猎奇永远鲜活" class="headerlink" title="永远猎奇永远鲜活"></a>永远猎奇永远鲜活</h2><p>设置了新的桌面背景和浏览器背景。打算买轻便本，华为还是macbook？手里的华为先体验一段时间再说。学习必须要继续，不能偷懒。<br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/22/imaged3f620429a9c4c15.png" alt="imaged3f620429a9c4c15.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/22/imagecd9ee8b85b6fd188.png" alt="imagecd9ee8b85b6fd188.png"><br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/22/image818c7082c453fadc.png" alt="image818c7082c453fadc.png"><br>正则表达式的这个图太好看了：<br><img src="https://v2ray.dana5haw.com:8008/images/2020/06/22/image7edfb6ee23065f6b.png" alt="image7edfb6ee23065f6b.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;今天父亲节，昨天听说今天是世界末日，今天有些地区似乎可以看到日环食。今天可真特殊。&lt;/p&gt;
    
    </summary>
    
    
      <category term="好奇星球" scheme="https://dana5haw.com/categories/%E5%A5%BD%E5%A5%87%E6%98%9F%E7%90%83/"/>
    
    
      <category term="父亲节" scheme="https://dana5haw.com/tags/%E7%88%B6%E4%BA%B2%E8%8A%82/"/>
    
  </entry>
  
</feed>
